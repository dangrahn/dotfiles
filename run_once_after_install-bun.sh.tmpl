#!/bin/bash
# run_once_after_install-bun.sh
# This script runs once after dotfiles are applied
# Installs bun and optionally installs global packages

set -e

echo "=== Setting up Bun ==="

# Check if bun is already installed
if command -v bun &> /dev/null; then
    echo "Bun $(bun --version) already installed"
else
    echo "Installing Bun..."
    curl -fsSL https://bun.sh/install | bash

    # Source bun in PATH for the remainder of this script
    export BUN_INSTALL="$HOME/.bun"
    export PATH="$BUN_INSTALL/bin:$PATH"

    if command -v bun &> /dev/null; then
        echo "Bun $(bun --version) installed successfully"
    else
        echo "ERROR: Bun installation failed"
        exit 1
    fi
fi

# Optionally install global bun packages here
# Example:
# echo "Installing global bun packages..."
# bun add -g <package-name>

echo "=== Bun setup complete ==="

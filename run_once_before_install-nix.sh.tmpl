#!/bin/bash
# run_once_before_install-nix.sh
# Install Nix package manager with flakes support
# Uses Determinate Systems installer for modern defaults

set -e

# Check if Nix is already installed
if command -v nix &> /dev/null; then
    echo "Nix is already installed"
    exit 0
fi

echo "Installing Nix..."

# Install Nix with Determinate Systems installer
curl --proto '=https' --tlsv1.2 -sSf -L https://install.determinate.systems/nix | \
    sh -s -- install --no-confirm

echo "Nix installation complete"

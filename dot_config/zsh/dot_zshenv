# ~/.config/zsh/.zshenv - Environment variables
# Loaded by: login shells, interactive shells, scripts

# Ghostty terminfo fallback - must be early before other tools read TERM
# If xterm-ghostty isn't in terminfo database, fall back to xterm-256color
if [[ "$TERM" == "xterm-ghostty" ]] && ! infocmp xterm-ghostty &>/dev/null; then
    export TERM="xterm-256color"
fi

# XDG Base Directories
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"

# Homebrew (macOS Apple Silicon)
if [[ -d /opt/homebrew ]]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# Homebrew (Linux)
if [[ -d /home/linuxbrew/.linuxbrew ]]; then
    eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi

# fnm (Fast Node Manager) - must be after Homebrew to take precedence
if command -v fnm &> /dev/null; then
    eval "$(fnm env --use-on-cd)"
fi

# Editor
export EDITOR="${EDITOR:-vim}"
export VISUAL="${VISUAL:-$EDITOR}"

# Projects directory for c() function
export PROJECTS="${PROJECTS:-$HOME/code}"

# History configuration
export HISTFILE="${XDG_STATE_HOME}/zsh/history"
export HISTSIZE=10000
export SAVEHIST=10000
